var GAMENAME="I2TM Site Builder",GAMEVERSION="0.1.0-alpha",GAMETAG=GAMENAME+" v"+GAMEVERSION;MySceneID={MYSCENE01:16,MYSCENE02:17,MYSCENE03:18};Game=h5c3.Game.extend("Game",{},{mainmenuScene:null,gameScene:null,init:function(a){this._super(a)},inactivateAllScenes:function(){this.setLayerInactive(this.mainmenuScene);this.setLayerInactive(this.gameScene)},setScene:function(d,c){this._super(d,c)},onReady:function(){this._super()},onExit:function(){this._super()}});h5c3.EntityFactory=h5c3.EntityFactory.extend("EntityFactory",{},{init:function(){this._super();this.sheetMainmenu=new h5c3.SpriteSheet({image:h5c3.device.loader.get("title").resource,frameWidth:512,frameHeight:128});this.sheetPlayer=new h5c3.SpriteSheet({image:h5c3.device.loader.get("puppy").resource,useRotation:true,frameWidth:70,frameHeight:124});this.sheetPlayer.addAnimation({offset:0,name:"floating",time:1500,frameCount:9})},create:function(b,a){$CHK(a.layer,null);$CHK(a.x,0);$CHK(a.y,0);$CHK(a.dir,0);$CHK(a.shape,0);var c=null;if(this.objects.type){return this.objects.type}switch(b){case"mainmenu":c=h5c3.Entity.create(a.layer);c.addTag(b);c.addComponent(h5c3.components.Sprite.create({spriteSheet:this.sheetMainmenu}));c.addComponent(h5c3.components.Spatial.create({w:this.sheetMainmenu.frameWidth,h:this.sheetMainmenu.frameHeight}));c.addComponent(h5c3.components.Layout.create({vertical:"center",horizontal:"center"}));return this.add(b,c);case"player":c=h5c3.Entity.create(a.layer);c.addTag(b);c.addComponent(h5c3.components.Sprite.create({spriteSheet:this.sheetPlayer}));c.addComponent(h5c3.components.Spatial.create({w:this.sheetPlayer.frameWidth,h:this.sheetPlayer.frameHeight}));c.addComponent(h5c3.components.Layout.create({vertical:"center",horizontal:"center"}));c.addComponent(h5c3.components.Input.create({states:[["btnUp",["UP"]],["btnDn",["DOWN"]],["btnLf",["LEFT"]],["btnRt",["RIGHT"]],["btnA",["1"]],["btnB",["2"]],["btnB",["3"]],["btnX",["4"]]]}));return this.add(b,c)}throw"Unknown entity type: "+type}});SoundFactory=h5c3.SoundFactory.extend("SoundFactory",{},{init:function(){this._super();if(!h5c3.device.soundEnabled){return}},play:function(b,a){if(!h5c3.device.soundEnabled){return}h5c3.checked(a,false);switch(b){case"i2tm":this.i2tm.play(false);return}throw"Unknown sound: "+b}});GameScene=h5c3.Scene.extend("GameScene",{},{layer:null,sprite:null,init:function(){this._super("Game Scene");this.layer=this.addLayer(new h5c3.EntityLayer({scene:this,name:"gameLayer",worldSizeX:this.ctx.canvas.width,worldSizeY:this.ctx.canvas.height}));this.layer.addSystem(new h5c3.systems.Render());this.layer.addSystem(new h5c3.systems.Layout());this.sprite=h5c3.entityFactory.create("player",{layer:this.layer});if(h5c3.device.useTouch){h5c3.device.touchpad.obj.touchpadScene.setTarget(this.sprite)}h5c3.device.input.bindState(this,"skip","ESC")},process:function(){if(h5c3.device.input.isInputState(this,"skip")){h5c3.device.game.obj.quit()}this._super()}});MainMenuScene=h5c3.Scene.extend("MainMenuScene",{},{layer:null,sprite:null,init:function(){this._super("MainMenu Scene");this.layer=this.addLayer(new h5c3.EntityLayer({scene:this,name:"mainmenuLayer",worldSizeX:this.ctx.canvas.width,worldSizeY:this.ctx.canvas.height}));this.layer.addSystem(new h5c3.systems.Render());this.layer.addSystem(new h5c3.systems.Layout());this.sprite=h5c3.entityFactory.create("mainmenu",{layer:this.layer});h5c3.device.input.bindAction(this,"skip","SPACE");h5c3.device.input.bindAction(this,"skip","MOUSE_CLICK");h5c3.device.input.bindAction(this,"skip","TOUCH")},onAction:function(a,b,c){if(a==="skip"){h5c3.device.game.obj.setScene(this,SceneID.GAME)}}});