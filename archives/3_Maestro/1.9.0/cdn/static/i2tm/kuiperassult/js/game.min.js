function pcGameMain() {
	var GAMENAME="Kuiper Assult",GAMEVERSION="0.8.0-beta",GAMETAG=GAMENAME+" v"+GAMEVERSION;SceneID={PUBLISHER:0,TITLE:1,GAME:2,GAMEOVER:3,CREDITS:4,PAUSED:5};var GAMESTATE=SceneID.PUBLISHER;DeviceID={APPLE:0,ANDROID:1,PC:2};PlayerStatus={IDLE:0,DEAD:1,ALIVE:2};Soundtrack={IDLE:0,DEAD:1,TEMPO:2,AMBIENT:3};CollisionType={NONE:0,PRIZE:1,BULLETS:2,ENEMY:3,FRIENDLY:4};var lastTimer=0;
	function timer(a,b){if(a)return lastTimer=Date.now(),void 0!=b&&pc.Base.info("TIMER: "+b+" started @ "+lastTimer),lastTimer;var d=Date.now()-lastTimer;void 0!=b&&pc.Base.info("TIMER: "+b+" elapsed = "+d+"ms");return d}
	TheGame=pc.Game.extend("TheGame",{},{publisherScene:null,gameScene:null,inactivateAllScenes:function(){this.setLayerInactive(publisherScene);this.setLayerInactive(gameScene)},setScene:function(a,b){b||(b=SceneID.PUBLISHER);var d=!1;switch(b){case SceneID.PUBLISHER:document.title="Kuiper Assult - Publisher";null===this.publisherScene?(this.publisherScene=new PublisherScene("publisher"),this.addScene(this.publisherScene)):pc.device.game.activateScene(a);d=!0;break;case SceneID.GAME:document.title="Kuiper Assult - Playing",
	null===this.gameScene?(this.gameScene=new GameScene("game"),this.addScene(this.gameScene)):pc.device.game.activateScene(a),d=!0}d&&null!=a&&pc.device.game.deactivateScene(a)},onLoading:function(a){},onLoaded:function(){pc.device.game.setScene(null,SceneID.LOADING)},onReady:function(){this._super();pc.device.devMode&&(this.info("Developer mode: Cache Disabled."),pc.device.loader.setDisableCache());pc.device.game.setScene(null,SceneID.LOADING)}});
	GamePhysics=pc.systems.Physics.extend("GamePhysics",{},{pellets:null,numHit:0,numPrizes:0,smokeSheet:null,explosionSound:null,prizeAquired:null,init:function(a){this._super(a);this.pellets=new pc.Hashtable;this.smokeSheet=new pc.SpriteSheet({image:pc.device.loader.get("smoke").resource,frameWidth:32,frameHeight:32,framesWide:16,framesHigh:1});this.smokeSheet.addAnimation({name:"smoking",time:1E3,loops:1});pc.device.soundEnabled&&(this.explosionSound=pc.device.loader.get("explosion").resource,this.explosionSound.setVolume(0.5),
	this.prizeAquired=pc.device.loader.get("prizeaquired").resource,this.prizeAquired.setVolume(0.5))},onCollisionStart:function(a,b,d,f,g,h,k){d.hasTag("PLAYER")&&f.hasTag("PRIZE")&&(this.prizeAquired.play(!1),f.getComponent("physics").setCollisionMask(0),f.getComponent("physics").setLinearVelocity(0,0),f.remove(),pc.systems.PrizeDropper.prototype.onPickup(d.layer.scene.Fighter),this.numPrizes++);if((f.hasTag("ASTEROID-LARGE")||f.hasTag("ASTEROID-MEDIUM")||f.hasTag("ASTEROID-SMALL"))&&(d.hasTag("BULLET")||
	d.hasTag("PLAYER"))){this.numHit++;if(d.hasTag("BULLET")&&(d.getComponent("physics").setCollisionMask(0),d.getComponent("physics").setLinearVelocity(0,0),d.remove(),d.hasTag("GRAVIBOMB")))for(a=d.getComponent("spatial"),createEntity(d.layer.scene,d.layer,"burst",a.pos.x,a.pos.y),b=0;17>b;b++)this.pellets.put(b,createEntity(d.layer.scene,d.layer,"pellet",a.pos.x,a.pos.y,20*b));this.explosionSound.play(!1);if(!f.hasComponentOfType("expiry")){d.layer.scene.asteroidsLeft--;f.getComponent("physics").setCollisionMask(0);
	f.getComponent("physics").setLinearVelocity(0,0);f.getComponent("sprite").sprite.setSpriteSheet(this.smokeSheet);f.addComponent(pc.components.Expiry.create({lifetime:2500}));a=f.getComponent("spatial");if(f.hasTag("ASTEROID-LARGE")){g=pc.Math.rand(1,3+Math.floor(d.layer.scene.level/2));h=pc.Math.rand(1,15);for(b=0;b<g;b++){var c=k=0;a.pos.x<a.dim.x&&(k+=a.dim.x+1);a.pos.y<a.dim.y&&(c+=a.dim.y+1);a.pos.x>pc.device.canvasWidth-a.dim.x&&(k=-a.dim.x+1);a.pos.y>pc.device.canvasHeight-a.dim.y&&(c=-a.dim.y+
	1);e=createEntity(f.layer.scene,f.layer,"asteroid-medium",a.pos.x+k,a.pos.y+c);e.getComponent("physics").setLinearVelocity(h,h)}d.layer.scene.asteroidsLeft+=g}else if(f.hasTag("ASTEROID-MEDIUM")){a=f.getComponent("spatial");g=pc.Math.rand(1,3+Math.floor(d.layer.scene.level/2));h=pc.Math.rand(1,30);for(b=0;b<g;b++)c=k=0,a.pos.x<a.dim.x&&(k+=a.dim.x+1),a.pos.y<a.dim.y&&(c+=a.dim.y+1),a.pos.x>pc.device.canvasWidth-a.dim.x&&(k=-a.dim.x+1),a.pos.y>pc.device.canvasHeight-a.dim.y&&(c=-a.dim.y+1),e=createEntity(f.layer.scene,
	f.layer,"asteroid-small",a.pos.x+k,a.pos.y+c),e.getComponent("physics").setLinearVelocity(h,h);d.layer.scene.asteroidsLeft+=g}d.layer.scene.asteroidsLeft?d.layer.scene.setMusic():(f.layer.scene.newLevel(this.numHit,this.numPrizes),this.numPrizes=this.numHit=0)}d.hasTag("WALL")||(f.layer.scene.Fighter.numHit++,f.layer.scene.score+=f.points,d.hasTag("PLAYER")&&(d.layer.scene.Fighter.health-=f.points/5,1>d.layer.scene.Fighter.health&&(d.getComponent("physics").setCollisionMask(0),d.getComponent("physics").setLinearVelocity(0,
	0),d.remove(),d.layer.scene.Fighter.status=PlayerStatus.DEAD)))}else f.hasTag("BULLET")&&d.hasTag("WALL")||f.hasTag("PELLET")&&d.hasTag("WALL")?(f.getComponent("physics").setCollisionMask(0),f.getComponent("physics").setLinearVelocity(0,0),f.remove()):(f.hasTag("ASTEROID-LARGE")||f.hasTag("ASTEROID-MEDIUM")||f.hasTag("ASTEROID-SMALL"))&&d.hasTag("WALL")}});
	LoadingScene=pc.Scene.extend("LoadingScene",{},{layer:null,spriteSheet:null,sprite:null,init:function(){this._super();this.layer=this.addLayer(new pc.EntityLayer("loading layer",pc.device.canvasWidth,pc.device.canvasHeight));this.layer.addSystem(new pc.systems.Render);this.preloadGraphics();this.preloadAudio();pc.device.loader.start(this.onLoading.bind(this),this.onLoaded.bind(this))},preloadGraphics:function(){pc.device.loader.add(new pc.Image("publisher","http://static.i2tmlabs.com/i2tm/kuiperassult/img/publisher.png"));pc.device.loader.add(new pc.Image("dialogcredits",
	"http://static.i2tmlabs.com/i2tm/kuiperassult/img/credits.png"));pc.device.loader.add(new pc.Image("hudmainbase","http://static.i2tmlabs.com/i2tm/kuiperassult/img/hudmain.png"));pc.device.loader.add(new pc.Image("hudenergybase","http://static.i2tmlabs.com/i2tm/kuiperassult/img/hudenergybase.png"));pc.device.loader.add(new pc.Image("hudarmorbase","http://static.i2tmlabs.com/i2tm/kuiperassult/img/hudarmorbase.png"));pc.device.loader.add(new pc.Image("hudenergybars","http://static.i2tmlabs.com/i2tm/kuiperassult/img/hudenergybars.png"));pc.device.loader.add(new pc.Image("hudarmorbars","http://static.i2tmlabs.com/i2tm/kuiperassult/img/hudarmorbars.png"));pc.device.loader.add(new pc.Image("backdrop1","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop1.jpg"));pc.device.loader.add(new pc.Image("playership",
	"http://static.i2tmlabs.com/i2tm/kuiperassult/img/ships.png"));pc.device.loader.add(new pc.Image("playerdebris","http://static.i2tmlabs.com/i2tm/kuiperassult/img/ship_debris.png"));pc.device.loader.add(new pc.Image("exhaust","http://static.i2tmlabs.com/i2tm/kuiperassult/img/exhaust.png"));pc.device.loader.add(new pc.Image("hyperjump","http://static.i2tmlabs.com/i2tm/kuiperassult/img/hyperjump.png"));pc.device.loader.add(new pc.Image("weap1","http://static.i2tmlabs.com/i2tm/kuiperassult/img/weap1-massprojector.png"));pc.device.loader.add(new pc.Image("weap2","http://static.i2tmlabs.com/i2tm/kuiperassult/img/weap2-dualplasmacanons.png"));pc.device.loader.add(new pc.Image("weap3","http://static.i2tmlabs.com/i2tm/kuiperassult/img/weap3-duallaserpods.png"));pc.device.loader.add(new pc.Image("weap4",
	"http://static.i2tmlabs.com/i2tm/kuiperassult/img/weap4.png"));pc.device.loader.add(new pc.Image("prize","http://static.i2tmlabs.com/i2tm/kuiperassult/img/prize.png"));pc.device.loader.add(new pc.Image("asteroid-large","http://static.i2tmlabs.com/i2tm/kuiperassult/img/asteroid-large.png"));pc.device.loader.add(new pc.Image("asteroid-medium","http://static.i2tmlabs.com/i2tm/kuiperassult/img/asteroid-medium.png"));pc.device.loader.add(new pc.Image("asteroid-small","http://static.i2tmlabs.com/i2tm/kuiperassult/img/asteroid-small.png"));pc.device.loader.add(new pc.Image("enemyship","http://static.i2tmlabs.com/i2tm/kuiperassult/img/enemyship.png"));pc.device.loader.add(new pc.Image("burst","http://static.i2tmlabs.com/i2tm/kuiperassult/img/burst.png"));pc.device.loader.add(new pc.Image("pellet",
	"http://static.i2tmlabs.com/i2tm/kuiperassult/img/pellet.png"));pc.device.loader.add(new pc.Image("smoke","http://static.i2tmlabs.com/i2tm/kuiperassult/img/smoke1.png"));pc.device.loader.add(new pc.Image("explosions","http://static.i2tmlabs.com/i2tm/kuiperassult/img/smallexplosions.png"));pc.device.loader.add(new pc.Image("playcraft","http://static.i2tmlabs.com/i2tm/kuiperassult/img/playcraft_labs.png"));pc.device.loader.add(new pc.Image("billboard","http://static.i2tmlabs.com/i2tm/kuiperassult/img/blank_billboard.png"));pc.device.loader.add(new pc.Image("backdrop2","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop2.jpg"));pc.device.loader.add(new pc.Image("backdrop3","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop3.jpg"));pc.device.loader.add(new pc.Image("backdrop4",
	"http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop4.jpg"));pc.device.loader.add(new pc.Image("backdrop5","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop5.jpg"));pc.device.loader.add(new pc.Image("backdrop6","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop6.jpg"));pc.device.loader.add(new pc.Image("backdrop7","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop7.jpg"));pc.device.loader.add(new pc.Image("backdrop8","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop8.jpg"));pc.device.loader.add(new pc.Image("backdrop9","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop9.jpg"));pc.device.loader.add(new pc.Image("backdrop10","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop10.jpg"));pc.device.loader.add(new pc.Image("backdrop11","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop11.jpg"));
	pc.device.loader.add(new pc.Image("backdrop12","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop12.jpg"))},preloadAudio:function(){pc.device.soundEnabled&&(pc.device.loader.add(new pc.Sound("weap1sound","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/weap1",["ogg","mp3"],4)),pc.device.loader.add(new pc.Sound("weap2sound","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/weap2",["ogg","mp3"],20)),pc.device.loader.add(new pc.Sound("weap3sound","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/weap3",["ogg","mp3"],8)),pc.device.loader.add(new pc.Sound("weap4sound","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/weap4",["ogg","mp3"],1)),pc.device.loader.add(new pc.Sound("explosion","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/explosion",
	["ogg","mp3"],16)),pc.device.loader.add(new pc.Sound("lowbattery","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/lowbattery",["ogg","mp3"],1)),pc.device.loader.add(new pc.Sound("powerfailure","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/powerfailure",["ogg","mp3"],1)),pc.device.loader.add(new pc.Sound("newlevel","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/newlevel",["ogg","mp3"],1)),pc.device.loader.add(new pc.Sound("musicambient","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/ambient",["ogg","mp3"],1)),pc.device.loader.add(new pc.Sound("musicidle","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/idle",["ogg","mp3"],1)),pc.device.loader.add(new pc.Sound("musictempo","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/uptempo",["ogg",
	"mp3"],1)),pc.device.loader.add(new pc.Sound("musictaps","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/taps",["ogg","mp3"],1)),pc.device.loader.add(new pc.Sound("prizeappears","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/power_up_appears",["ogg","mp3"],2)),pc.device.loader.add(new pc.Sound("prizeaquired","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/power_up_aquired",["ogg","mp3"],2)))},onLoaded:function(){pc.device.game.setScene(this,SceneID.PUBLISHER)},onLoading:function(a){var b=pc.device.ctx;b.clearRect(0,0,pc.device.canvasWidth,pc.device.canvasHeight);b.font="normal 50px Orbitron";b.fillStyle="#88f";b.fillText("Kuiper Assult",
	40,pc.device.canvasHeight/2-50);b.font="normal 18px Verdana";b.fillStyle="#ccc";b.fillText("Loading: "+a+"%",40,pc.device.canvasHeight/2)},process:function(){pc.device.loader.finished&&(pc.device.ctx.clearRect(0,0,pc.device.canvasWidth,pc.device.canvasHeight),this._super())}});
	PublisherScene=pc.Scene.extend("PublisherScene",{},{layer:null,spriteSheet:null,sprite:null,init:function(){this._super();this.preloadGraphics();this.preloadAudio();pc.device.loader.start(this.onLoading.bind(this),this.onLoaded.bind(this))},show:function(){this.layer=this.addLayer(new pc.EntityLayer("publisher layer",pc.device.canvasWidth,pc.device.canvasHeight));this.layer.addSystem(new pc.systems.Render);this.spriteSheet=new pc.SpriteSheet({image:pc.device.loader.get("publisher").resource,frameWidth:400,
	frameHeight:400});this.sprite=pc.Entity.create(this.layer);this.sprite.addComponent(pc.components.Sprite.create({spriteSheet:this.spriteSheet}));this.sprite.addComponent(pc.components.Spatial.create({x:(pc.device.canvasWidth-this.spriteSheet.frameWidth)/2,y:(pc.device.canvasHeight-this.spriteSheet.frameHeight)/2,dir:0,w:this.spriteSheet.frameWidth,h:this.spriteSheet.frameHeight}))},preloadGraphics:function(){pc.device.loader.add(new pc.Image("publisher","http://static.i2tmlabs.com/i2tm/kuiperassult/img/publisher.png"));pc.device.loader.add(new pc.Image("dialogcredits",
	"http://static.i2tmlabs.com/i2tm/kuiperassult/img/credits.png"));pc.device.loader.add(new pc.Image("hudmainbase","http://static.i2tmlabs.com/i2tm/kuiperassult/img/hudmain.png"));pc.device.loader.add(new pc.Image("hudenergybase","http://static.i2tmlabs.com/i2tm/kuiperassult/img/hudenergybase.png"));pc.device.loader.add(new pc.Image("hudarmorbase","http://static.i2tmlabs.com/i2tm/kuiperassult/img/hudarmorbase.png"));pc.device.loader.add(new pc.Image("hudenergybars","http://static.i2tmlabs.com/i2tm/kuiperassult/img/hudenergybars.png"));pc.device.loader.add(new pc.Image("hudarmorbars","http://static.i2tmlabs.com/i2tm/kuiperassult/img/hudarmorbars.png"));pc.device.loader.add(new pc.Image("backdrop1","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop1.jpg"));pc.device.loader.add(new pc.Image("playership",
	"http://static.i2tmlabs.com/i2tm/kuiperassult/img/ships.png"));pc.device.loader.add(new pc.Image("playerdebris","http://static.i2tmlabs.com/i2tm/kuiperassult/img/ship_debris.png"));pc.device.loader.add(new pc.Image("exhaust","http://static.i2tmlabs.com/i2tm/kuiperassult/img/exhaust.png"));pc.device.loader.add(new pc.Image("hyperjump","http://static.i2tmlabs.com/i2tm/kuiperassult/img/hyperjump.png"));pc.device.loader.add(new pc.Image("weap1","http://static.i2tmlabs.com/i2tm/kuiperassult/img/weap1-massprojector.png"));pc.device.loader.add(new pc.Image("weap2","http://static.i2tmlabs.com/i2tm/kuiperassult/img/weap2-dualplasmacanons.png"));pc.device.loader.add(new pc.Image("weap3","http://static.i2tmlabs.com/i2tm/kuiperassult/img/weap3-duallaserpods.png"));pc.device.loader.add(new pc.Image("weap4",
	"http://static.i2tmlabs.com/i2tm/kuiperassult/img/weap4.png"));pc.device.loader.add(new pc.Image("prize","http://static.i2tmlabs.com/i2tm/kuiperassult/img/prize.png"));pc.device.loader.add(new pc.Image("asteroid-large","http://static.i2tmlabs.com/i2tm/kuiperassult/img/asteroid-large.png"));pc.device.loader.add(new pc.Image("asteroid-medium","http://static.i2tmlabs.com/i2tm/kuiperassult/img/asteroid-medium.png"));pc.device.loader.add(new pc.Image("asteroid-small","http://static.i2tmlabs.com/i2tm/kuiperassult/img/asteroid-small.png"));pc.device.loader.add(new pc.Image("enemyship","http://static.i2tmlabs.com/i2tm/kuiperassult/img/enemyship.png"));pc.device.loader.add(new pc.Image("burst","http://static.i2tmlabs.com/i2tm/kuiperassult/img/burst.png"));pc.device.loader.add(new pc.Image("pellet",
	"http://static.i2tmlabs.com/i2tm/kuiperassult/img/pellet.png"));pc.device.loader.add(new pc.Image("smoke","http://static.i2tmlabs.com/i2tm/kuiperassult/img/smoke1.png"));pc.device.loader.add(new pc.Image("explosions","http://static.i2tmlabs.com/i2tm/kuiperassult/img/smallexplosions.png"));pc.device.loader.add(new pc.Image("playcraft","http://static.i2tmlabs.com/i2tm/kuiperassult/img/playcraft_labs.png"));pc.device.loader.add(new pc.Image("billboard","http://static.i2tmlabs.com/i2tm/kuiperassult/img/blank_billboard.png"));pc.device.loader.add(new pc.Image("backdrop2","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop2.jpg"));pc.device.loader.add(new pc.Image("backdrop3","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop3.jpg"));pc.device.loader.add(new pc.Image("backdrop4",
	"http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop4.jpg"));pc.device.loader.add(new pc.Image("backdrop5","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop5.jpg"));pc.device.loader.add(new pc.Image("backdrop6","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop6.jpg"));pc.device.loader.add(new pc.Image("backdrop7","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop7.jpg"));pc.device.loader.add(new pc.Image("backdrop8","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop8.jpg"));pc.device.loader.add(new pc.Image("backdrop9","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop9.jpg"));pc.device.loader.add(new pc.Image("backdrop10","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop10.jpg"));pc.device.loader.add(new pc.Image("backdrop11","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop11.jpg"));
	pc.device.loader.add(new pc.Image("backdrop12","http://static.i2tmlabs.com/i2tm/kuiperassult/img/backdrop12.jpg"))},preloadAudio:function(){pc.device.soundEnabled&&(pc.device.loader.add(new pc.Sound("weap1sound","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/weap1",["ogg","mp3"],4)),pc.device.loader.add(new pc.Sound("weap2sound","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/weap2",["ogg","mp3"],20)),pc.device.loader.add(new pc.Sound("weap3sound","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/weap3",["ogg","mp3"],8)),pc.device.loader.add(new pc.Sound("weap4sound","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/weap4",["ogg","mp3"],1)),pc.device.loader.add(new pc.Sound("explosion","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/explosion",
	["ogg","mp3"],16)),pc.device.loader.add(new pc.Sound("lowbattery","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/lowbattery",["ogg","mp3"],1)),pc.device.loader.add(new pc.Sound("powerfailure","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/powerfailure",["ogg","mp3"],1)),pc.device.loader.add(new pc.Sound("newlevel","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/newlevel",["ogg","mp3"],1)),pc.device.loader.add(new pc.Sound("musicambient","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/ambient",["ogg","mp3"],1)),pc.device.loader.add(new pc.Sound("musicidle","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/idle",["ogg","mp3"],1)),pc.device.loader.add(new pc.Sound("musictempo","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/uptempo",["ogg",
	"mp3"],1)),pc.device.loader.add(new pc.Sound("musictaps","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/taps",["ogg","mp3"],1)),pc.device.loader.add(new pc.Sound("prizeappears","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/power_up_appears",["ogg","mp3"],2)),pc.device.loader.add(new pc.Sound("prizeaquired","http://static.i2tmlabs.com/i2tm/kuiperassult/snd/power_up_aquired",["ogg","mp3"],2)))},onLoaded:function(){pc.device.game.setScene(this,SceneID.GAME)},onLoading:function(a,b){"publisher"==b&&this.show();var d=pc.device.ctx;d.clearRect(0,0,pc.device.canvasWidth,pc.device.canvasHeight);d.font="normal 50px Orbitron";
	d.fillStyle="#88f";d.fillText("Kuiper Assult",40,pc.device.canvasHeight/2-50);d.font="normal 18px Verdana";d.fillStyle="#ccc";d.fillText("Loading: "+a+"%",40,pc.device.canvasHeight/2)},process:function(){pc.device.loader.finished&&(pc.device.ctx.clearRect(0,0,pc.device.canvasWidth,pc.device.canvasHeight),this._super())}});
	GameScene=pc.Scene.extend("GameScene",{},{lastUsedHeap:0,lastTimer:0,Fighter:null,Fighter1:null,Fighter2:null,Fighter3:null,Fighter4:null,Fighter5:null,asteroidsLeft:0,level:0,stage:0,score:0,average:0,lastFireTime:0,jumpengaged:!1,starsLayer:null,gameLayer:null,hudLayer:null,processLast:0,processElapsed:0,process100ms:0,process250ms:0,process500ms:0,process1000ms:0,process5000ms:0,processAvg:0,processCnt:0,processTot:0,levelBounce:1,init:function(){timer(!0,this.Class.shortName+"::init()");this._super();
	this.Fighter1=new Fighter("Scout",6,1,35,5,40,500,50,350,1500);this.Fighter2=new Fighter("Fighter",8,1.2,40,6.5,50,750,60,300,1250);this.Fighter3=new Fighter("Frigate",10,1.4,45,8,60,1E3,70,250,1E3);this.Fighter4=new Fighter("Destroyer",12,1.8,50,9.5,70,1250,80,200,750);this.Fighter5=new Fighter("Dreadnaught",16,2,55,11,80,1500,90,100,500);this.Fighter=this.Fighter1;this.initLayers();this.newLevel();this.initPlayerInput();this.processLast=Date.now();timer(!1,this.Class.shortName+"::init()")},initLayers:function(){this.starsLayer=
	this.addLayer(new StarsLayer("stars layer",1));this.gameLayer=this.addLayer(new GameLayer(this));this.hudLayer=this.addLayer(new HudLayer(this));this.starsLayer.setZIndex(1);this.gameLayer.setZIndex(2);this.hudLayer.setZIndex(3)},initPlayerInput:function(){pc.device.devMode&&this.info("Initializing Player Input");pc.device.input.bindState(this,"turning right","RIGHT");pc.device.input.bindState(this,"turning left","LEFT");pc.device.input.bindState(this,"thrusting","UP");pc.device.input.bindState(this,
	"reversing","DOWN");pc.device.input.bindState(this,"weapon1","1");pc.device.input.bindState(this,"weapon2","2");pc.device.input.bindState(this,"weapon3","3");pc.device.input.bindState(this,"weapon4","4");pc.device.input.bindState(this,"allweapons","5");pc.device.input.bindAction(this,"pause","ESC")},onResize:function(a,b){this._super(a,b)},displayText:function(a){var b=pc.Entity.create(this.gameLayer);b.addComponent(pc.components.Fade.create({fadeInTime:1E3,holdTime:1E3,fadeOutTime:1500}));b.addComponent(pc.components.Text.create({color:"#e65cba",
	text:[a],fontHeight:20}));b.addComponent(pc.components.Expiry.create({lifetime:6500}));b.addComponent(pc.components.Spatial.create({dir:0,w:170,h:20}));b.addComponent(pc.components.Layout.create({vertical:"middle",horizontal:"left",margin:{left:30}}))},createStageAlert:function(){var a=pc.Entity.create(this.gameLayer);a.addComponent(pc.components.Fade.create({fadeInTime:1E3,holdTime:4E3,fadeOutTime:2E3}));a.addComponent(pc.components.Expiry.create({lifetime:7E3}));a.addComponent(pc.components.Spatial.create({dir:0,
	w:170,h:44}));1==this.stage?a.addComponent(pc.components.Text.create({color:"#000000",strokeColor:"#6666ff",text:["3 Waves to Stage 2"],lineWidth:2,fontHeight:44})):2<=this.stage&&4>=this.stage?a.addComponent(pc.components.Text.create({color:"#000000",strokeColor:"#6666ff",text:["Stage "+this.stage+" complete","5 Waves to Stage "+this.stage+1,"Ship upgraded to "+this.Fighter.desc],lineWidth:2,fontHeight:44})):a.addComponent(pc.components.Text.create({color:"#000000",strokeColor:"#6666ff",text:["Stage "+
	this.stage+" complete","5 Waves to Stage "+this.stage+1],lineWidth:2,fontHeight:44}));a.addComponent(pc.components.Layout.create({vertical:"bottom",horizontal:"center",margin:{bottom:170,left:0}}))},createLevelAlert:function(){var a=pc.Entity.create(this.gameLayer);a.addComponent(pc.components.Fade.create({fadeInTime:1E3,holdTime:4E3,fadeOutTime:2E3}));a.addComponent(pc.components.Expiry.create({lifetime:7E3}));a.addComponent(pc.components.Spatial.create({dir:0,w:250,h:44}));a.addComponent(pc.components.Text.create({color:"#000000",
	strokeColor:"#6666ff",text:["Level "+this.level],lineWidth:2,fontHeight:44}));a.addComponent(pc.components.Layout.create({vertical:"bottom",horizontal:"center",margin:{bottom:170,left:0}}))},createLevelComplete:function(){var a=pc.Entity.create(this.gameLayer);a.addComponent(pc.components.Text.create({color:"#ffffff",text:["Level "+this.level+" Complete"],lineWidth:0,fontHeight:20}));a.addComponent(pc.components.Fade.create({fadeInTime:1500,holdTime:2E3,fadeOutTime:1500}));a.addComponent(pc.components.Expiry.create({lifetime:6500}));
	a.addComponent(pc.components.Spatial.create({dir:0,w:170,h:20}));a.addComponent(pc.components.Layout.create({vertical:"middle",horizontal:"center"}))},newLevel:function(a,b){this.gameLayer.sndNewLevel.play(!1);this.level++;1<this.level&&(prizeTotal=this.gameLayer.sysPrize.total,this.prizeAvg=Math.floor(100*(b/prizeTotal)),this.average=Math.floor(100*(a/this.Fighter.numFired)),bonus=Math.floor(this.level*(this.prizeAvg+this.average)),pc.hudLog("Your Accuracy was "+this.average+"% and ",!1),pc.hudLog("You aquired "+
	this.prizeAvg+"% of the prizes.",!0),pc.hudLog("You get "+bonus+" points for clearing the level.",!0),300<this.average?pc.hudLog("Your a GOD! Absolutly excellent work.",!0):250<this.average?pc.hudLog("Breathtaking, simply breathtaking.",!0):180<this.average?pc.hudLog("Amazing, excellent work nt he guns.",!0):120<this.average?pc.hudLog("Superb!!! WOW great job.",!0):90<this.average?pc.hudLog("AWESOME work!",!0):70<this.average&&90>this.average?pc.hudLog("Good job.",!0):50<this.average&&70>this.average?
	pc.hudLog("You did ok.",!0):30<this.average&&50>this.average?pc.hudLog("Are you blind?",!0):30>this.average?pc.hudLog("OMG! You suck!, "+this.average+"% The starport needs a Janitor. You should take the job.",!0):20>this.average&&pc.hudLog("At least you hit something, YOu are better suited for un-employment though.",!0));this.Fighter.numFired=0;this.gameLayer.sysPrize.total=0;var d=this.stage;2>=this.level&&(this.stage=1,this.Fighter=this.Fighter1,this.Fighter.weap1.avail=!0,this.Fighter.weap2.avail=
	!1,this.Fighter.weap3.avail=!1,this.Fighter.weap4.avail=!1,this.gameLayer.player.getComponent("sprite").sprite.setAnimation(this.Fighter.desc),pc.hudLog("You are flying a "+this.Fighter.desc+" class fighter."));3<=this.level&&4>=this.level&&(this.stage=2,this.Fighter=this.Fighter2,this.Fighter.weap1.avail=!0,this.Fighter.weap2.avail=!0,this.Fighter.weap3.avail=!1,this.Fighter.weap4.avail=!1,this.gameLayer.player.getComponent("sprite").sprite.setAnimation(this.Fighter.desc),pc.hudLog("Ship upgraded to a "+
	this.Fighter.desc+" class fighter.",!0),pc.hudLog("New weapon system, Dual Plasma Cannons. Number [2] to use weapon.",!0));5<=this.level&&6>=this.level&&(this.stage=3,this.Fighter=this.Fighter3,this.Fighter.weap1.avail=!0,this.Fighter.weap2.avail=!0,this.Fighter.weap3.avail=!0,this.Fighter.weap4.avail=!1,this.gameLayer.player.getComponent("sprite").sprite.setAnimation(this.Fighter.desc),pc.hudLog("Ship upgraded to a "+this.Fighter.desc+" class fighter.",!0),pc.hudLog("New weapon system, Dual Pulsed Lasers pods. Number [3] to use weapon.",
	!0));7<=this.level&&8>=this.level&&(this.stage=4,this.Fighter=this.Fighter4,this.Fighter.weap1.avail=!0,this.Fighter.weap2.avail=!0,this.Fighter.weap3.avail=!0,this.Fighter.weap4.avail=!0,this.gameLayer.player.getComponent("sprite").sprite.setAnimation(this.Fighter.desc),pc.hudLog("Ship upgraded to a "+this.Fighter.desc+" class fighter.",!0),pc.hudLog("New weapon system, Gravibombs. Number [4] to use weapon.",!0));9<=this.level&&10>=this.level&&(this.stage=5,this.Fighter=this.Fighter5,this.Fighter.weap1.avail=
	!0,this.Fighter.weap2.avail=!0,this.Fighter.weap3.avail=!0,this.Fighter.weap4.avail=!0,pc.hudLog("Ship upgraded to a "+this.Fighter.desc+" class fighter.",!0),pc.hudLog("WTF! New Oh Crap feature, You can fire all weapons systems. Number [5] to use all weapons.",!0),this.gameLayer.player.getComponent("sprite").sprite.setAnimation(this.Fighter.desc));11<=this.level&&15>=this.level&&(this.stage=6,this.Fighter.regen+=0.25,pc.hudLog("Regeneration increased.",!0));16<=this.level&&20>=this.level&&(this.stage=
	7,this.Fighter.maxEnergy+=250,pc.hudLog("Maximum Energy Capacity increased.",!0));21<=this.level&&25>=this.level&&(this.stage=8,this.Fighter.regen+=0.25,pc.hudLog("Regeneration increased.",!0));26<=this.level&&30>=this.level&&(this.stage=9,this.Fighter.maxEnergy+=250,pc.hudLog("Maximum Energy Capacity increased.",!0));31<=this.level&&35>=this.level&&(this.stage=10,this.Fighter.regen+=0.25,pc.hudLog("Regeneration increased.",!0));36<=this.level&&40>=this.level?(this.stage=11,this.Fighter.maxEnergy+=
	250,pc.hudLog("Maximum Energy Capacity increased.",!0)):41<=this.level&&(this.stage=12,this.Fighter.regen+=0.25,this.Fighter.maxEnergy+=250,pc.hudLog("Regeneration increased.",!0),pc.hudLog("Maximum Energy Capacity increased.",!0));this.stage!==d&&(this.createStageAlert(),this.levelBounce+=0.01,this.starsLayer.setBackdrop(this.stage),pc.hudLog("Advanced to Stage "+this.stage+" - "));for(var d=1+this.level,f=0;f<d;f++)createEntity(this,this.gameLayer,"asteroid-large");this.asteroidsLeft+=d;pc.hudLog("Level "+
	this.level+", Good luck.",!0)},onAction:function(a,b,d){"hyperjump"===a&&(this.jumpengaged?this.resume():this.pause(),this.jumpengaged=!this.jumpengaged);"toggle music"===a&&(this.gameLayer.musicPlaying?(this.gameLayer.musicAmbient.stop(),this.gameLayer.musicPlaying=!1):(this.gameLayer.musicAmbient.play(),this.gameLayer.musicPlaying=!0))},fireWeap1:function(a){if(this.Fighter.weap1.avail&&300<pc.device.now-this.Fighter.weap1.lastFired){this.Fighter.weap1.lastFired=pc.device.now;var b=this.gameLayer.weap1FireSheet.frameWidth/
	2;this.Fighter.energy-=this.Fighter.weap1.energy;a.subtract(b,b);a.moveInDir(this.gameLayer.playerSpatial.dir,60);createEntity(this,this.gameLayer,"projector",a.x,a.y,this.gameLayer.playerSpatial.dir);this.gameLayer.sndWeap1.play(!1);this.Fighter.numFired++}},fireWeap2:function(a){if(this.Fighter.weap2.avail&&100<pc.device.now-this.Fighter.weap2.lastFired&&(this.Fighter.weap2.lastFired=pc.device.now,this.Fighter.energy>this.Fighter.weap2.energy)){var b=this.gameLayer.weap2FireSheet.frameWidth/2;this.Fighter.energy-=
	this.Fighter.weap2.energy;a.subtract(b,b);a.moveInDir(this.gameLayer.playerSpatial.dir,40);createEntity(this,this.gameLayer,"plasma",a.x,a.y,this.gameLayer.playerSpatial.dir);this.gameLayer.sndWeap2.play(!1);this.Fighter.numFired++}},fireWeap3:function(a){if(this.Fighter.weap3.avail&&150<pc.device.now-this.Fighter.weap3.lastFired&&(this.Fighter.weap3.lastFired=pc.device.now,this.Fighter.energy>this.Fighter.weap3.energy)){var b=this.gameLayer.weap3FireSheet.frameWidth/2;this.Fighter.energy-=this.Fighter.weap3.energy;
	a.subtract(b,b);a.moveInDir(this.gameLayer.playerSpatial.dir,30);createEntity(this,this.gameLayer,"laser",a.x,a.y,this.gameLayer.playerSpatial.dir);this.gameLayer.sndWeap3.play(!1);this.Fighter.numFired++}},fireWeap4:function(a){if(this.Fighter.weap4.avail&&3E3<pc.device.now-this.Fighter.weap4.lastFired&&(this.Fighter.weap4.lastFired=pc.device.now,this.Fighter.energy>this.Fighter.weap4.energy)){a=this.gameLayer.leftWingTipGun.getComponent("spatial").getCenterPos();var b=this.gameLayer.rightWingTipGun.getComponent("spatial").getCenterPos();
	this.Fighter.energy-=this.Fighter.weap4.energy;createEntity(this,this.gameLayer,"gravibomb",a.x,a.y,this.gameLayer.playerSpatial.dir);createEntity(this,this.gameLayer,"gravibomb",b.x,b.y,this.gameLayer.playerSpatial.dir);this.gameLayer.sndWeap4.play(!1);this.Fighter.numFired++}},fireWeapAll:function(a){this.fireWeap1(a);this.fireWeap2(a);this.fireWeap3(a);this.fireWeap4(a)},setMusic:function(){100<this.asteroidsLeft&&this.gameLayer.music!=Soundtrack.TEMPO?(this.gameLayer.music=Soundtrack.TEMPO,this.gameLayer.musicTempo.play(!0),
	this.gameLayer.musicIdle.stop(),this.gameLayer.musicAmbient.stop()):25<this.asteroidsLeft&&100>this.asteroidsLeft&&this.gameLayer.music!=Soundtrack.IDLE?(this.gameLayer.music=Soundtrack.IDLE,this.gameLayer.musicIdle.play(!0),this.gameLayer.musicAmbient.stop(),this.gameLayer.musicTempo.stop()):10>this.asteroidsLeft&&this.gameLayer.music!=Soundtrack.AMBIENT&&(this.gameLayer.music=Soundtrack.AMBIENT,this.gameLayer.musicAmbient.play(!0),this.gameLayer.musicIdle.stop(),this.gameLayer.musicTempo.stop())},
	playerDead:function(){this.gameLayer.music=Soundtrack.DEAD;this.gameLayer.musicTaps.play(!1);this.gameLayer.musicAmbient.stop();this.gameLayer.musicIdle.stop();this.gameLayer.musicTempo.stop();createEntity(this,this.gameLayer,"debris");this.Fighter.status=PlayerStatus.IDLE},checkMemory:function(){window.performance.memory.usedJSHeapSize<this.lastUsedHeap&&console.log("Garbage collected!");this.lastUsedHeap=window.performance.memory.usedJSHeapSize},process:function(){if(pc.device.loader.finished&&
	!this.paused){this.processElapsed=timer(!0)-this.processLast;this.processLast=Date.now();this.processCnt++;if(this.Fighter.status==PlayerStatus.DEAD)this.playerDead();else{this.Fighter.regenerate(this.hudLayer);pc.device.input.isInputState(this,"turning left")?this.gameLayer.playerPhysics.applyTurn(-this.Fighter.jets):pc.device.input.isInputState(this,"turning right")?this.gameLayer.playerPhysics.applyTurn(this.Fighter.jets):this.gameLayer.playerPhysics.applyTurn(0);pc.device.input.isInputState(this,
	"thrusting")?(this.gameLayer.playerPhysics.applyForce(this.Fighter.thrust),this.gameLayer.engine.getComponent("emitter").emitting=!0):pc.device.input.isInputState(this,"reversing")?this.gameLayer.playerPhysics.applyForce(-this.Fighter.thrust):this.gameLayer.engine.getComponent("emitter").emitting=!1;if(100<timer(!0)-this.process100ms){this.process100ms=this.processLast;var a=this.gameLayer.playerSpatial.getCenterPos();this.Fighter.canFire(1)&&pc.device.input.isInputState(this,"weapon1")&&this.fireWeap1(a);
	this.Fighter.canFire(2)&&pc.device.input.isInputState(this,"weapon2")&&this.fireWeap2(a);this.Fighter.canFire(3)&&pc.device.input.isInputState(this,"weapon3")&&this.fireWeap3(a);this.Fighter.canFire(4)&&pc.device.input.isInputState(this,"weapon4")&&this.fireWeap4(a);this.Fighter.canFire(1)&&this.Fighter.canFire(2)&&this.Fighter.canFire(3)&&this.Fighter.canFire(4)&&pc.device.input.isInputState(this,"allweapons")&&this.fireWeapAll(a)}1E3<timer(!0)-this.process1000ms&&(this.process1000ms=this.processLast,
	this.processTot+=this.processElapsed,33>this.Fighter.health&&this.gameLayer.sndAlarmHull.play(!1),100>this.Fighter.energy&&this.gameLayer.sndAlarmBattery.play(!1))}5E3<timer(!0)-this.process5000ms&&(this.process5000ms=this.processLast,this.processAvg=this.processTot/this.processCnt,this.info("Process Time: "+this.processAvg+"ms"));this.processLast=Date.now();this._super()}}});pc.hudLog=function(a,b){var d=document.getElementById("hudText");d.value+=a;b&&(d.value+="\n");d.scrollTop=d.scrollHeight};
	HudLayer=pc.EntityLayer.extend("hudLayer",{},{hudText:null,sheetEnergy:null,sheetEnergyBars:null,sheetArmor:null,sheetArmorBars:null,hudEnergy:null,hudEnergyPct:null,hudEnergyBars:null,hudEnergyPct:null,hudArmor:null,hudArmorBars:null,hudArmorPct:null,hudAsteroids:null,hudShipType:null,hudScore:null,selected:0,saved:0,parent_scene:null,init:function(a){this._super("hudLayer",pc.device.canvasWidth,pc.device.canvasHeight);this.parent_scene=a;this.createHudMain();this.createHudEnergy();this.createHudArmor();
	this.createhudScore();this.addSystem(new pc.systems.Render)},createHudMain:function(){this.sheetMain=new pc.SpriteSheet({image:pc.device.loader.get("hudmainbase").resource});this.hudMain=pc.Entity.create(this);this.hudMain.addComponent(pc.components.Sprite.create({spriteSheet:this.sheetMain}));this.hudMain.addComponent(pc.components.Spatial.create({x:(pc.device.canvasWidth-this.sheetMain.frameWidth)/2,y:0,dir:0,w:this.sheetMain.frameWidth,h:this.sheetMain.frameHeight}));document.getElementById("hudText")?
	this.hudText=document.getElementById("hudText"):(this.hudText=document.createElement("textarea"),document.body.appendChild(this.hudText));this.hudText.id="hudText";this.hudText.disabled=!0;this.hudText.style.width=this.sheetMain.frameWidth-30+"px";this.hudText.style.height="124px";this.hudText.style.top="50px";this.hudText.top=50;this.hudText.left=(pc.device.canvasWidth-this.sheetMain.frameWidth)/2;this.hudText.style.left=(pc.device.canvasWidth-(this.sheetMain.frameWidth-30))/2+"px";this.hudText.setAttribute("readonly",
	"readonly");pc.hudLog("All system online.",!0)},createHudEnergy:function(){this.sheetEnergy=new pc.SpriteSheet({image:pc.device.loader.get("hudenergybase").resource});this.hudEnergy=pc.Entity.create(this);this.hudEnergy.addComponent(pc.components.Sprite.create({spriteSheet:this.sheetEnergy}));this.hudEnergy.addComponent(pc.components.Spatial.create({x:16,y:pc.device.canvasHeight-this.sheetEnergy.frameHeight-16,dir:0,w:this.sheetEnergy.frameWidth,h:this.sheetEnergy.frameHeight}));this.sheetEnergyBars=
	new pc.SpriteSheet({image:pc.device.loader.get("hudenergybars").resource});this.hudEnergyBars=pc.Entity.create(this);this.hudEnergyBars.addComponent(pc.components.Sprite.create({spriteSheet:this.sheetEnergyBars}));this.hudEnergyBars.addComponent(pc.components.Spatial.create({x:30,y:pc.device.canvasHeight-this.sheetEnergyBars.frameHeight-66,dir:0,w:this.sheetEnergyBars.frameWidth,h:this.sheetEnergyBars.frameHeight}));this.hudEnergyBars.addComponent(pc.components.Clip.create({x:0,y:0,w:this.sheetEnergyBars.frameWidth,
	h:this.sheetEnergyBars.frameHeight}))},createHudArmor:function(){this.sheetArmor=new pc.SpriteSheet({image:pc.device.loader.get("hudarmorbase").resource});this.hudArmor=pc.Entity.create(this);this.hudArmor.addComponent(pc.components.Sprite.create({spriteSheet:this.sheetArmor}));this.hudArmor.addComponent(pc.components.Spatial.create({x:pc.device.canvasWidth-this.sheetArmor.frameWidth-16,y:pc.device.canvasHeight-this.sheetArmor.frameHeight-16,dir:0,w:this.sheetArmor.frameWidth,h:this.sheetArmor.frameHeight}));
	this.sheetArmorBars=new pc.SpriteSheet({image:pc.device.loader.get("hudarmorbars").resource});this.hudArmorBars=pc.Entity.create(this);this.hudArmorBars.addComponent(pc.components.Sprite.create({spriteSheet:this.sheetArmorBars}));this.hudArmorBars.addComponent(pc.components.Spatial.create({x:pc.device.canvasWidth-this.sheetArmorBars.frameWidth-30,y:pc.device.canvasHeight-this.sheetArmorBars.frameHeight-66,dir:0,w:this.sheetArmorBars.frameWidth,h:this.sheetArmorBars.frameHeight}));this.hudArmorBars.addComponent(pc.components.Clip.create({x:0,
	y:0,w:this.sheetArmorBars.frameWidth,h:this.sheetArmorBars.frameHeight}))},createhudAsteroids:function(){var a=pc.Entity.create(this.parent_scene.gameLayer);a.addComponent(pc.components.Text.create({color:"#ffffff",text:["Asteroids: "+this.parent_scene.asteroidsLeft],lineWidth:0,fontHeight:20}));a.addComponent(pc.components.Spatial.create({dir:0,w:170,h:20}));a.addComponent(pc.components.Layout.create({vertical:"top",horizontal:"left",margin:{top:30,left:30}}));this.hudAsteroids=a},createhudShipType:function(){var a=
	pc.Entity.create(this.parent_scene.gameLayer);a.addComponent(pc.components.Text.create({color:"#ffffff",text:["Ship Type: "+this.parent_scene.Fighter.desc],lineWidth:0,fontHeight:20}));a.addComponent(pc.components.Spatial.create({dir:0,w:170,h:20}));a.addComponent(pc.components.Layout.create({vertical:"top",horizontal:"center",margin:{top:30,left:30}}));this.hudShipType=a},createhudScore:function(){var a=pc.Entity.create(this.parent_scene.gameLayer);a.addComponent(pc.components.Text.create({color:"#ffffff",
	text:[this.parent_scene.score],lineWidth:0,fontHeight:20}));a.addComponent(pc.components.Spatial.create({dir:0,w:170,h:20}));a.addComponent(pc.components.Layout.create({vertical:"top",horizontal:"center",margin:{top:10,left:0}}));this.hudScore=a},createhudEnergyPct:function(){var a=pc.Entity.create(this.parent_scene.gameLayer);a.addComponent(pc.components.Text.create({color:"#ffffff",text:[this.parent_scene.score],lineWidth:0,fontHeight:20}));a.addComponent(pc.components.Spatial.create({dir:0,w:170,
	h:20}));a.addComponent(pc.components.Layout.create({vertical:"top",horizontal:"left",margin:{top:10,left:0}}));this.hudEnergyPct=a},draw:function(){var a=this.parent_scene.score.toString().length;this.hudScore.getComponent("Spatial").setWidth(20*a);this.hudScore.getComponent("text").text[0]=this.parent_scene.score;this._super()}});
	GameLayer=pc.EntityLayer.extend("gameLayer",{},{parent_scene:null,largeAsteroidSheet:null,mediumAsteroidSheet:null,smallAsteroidSheet:null,playerSheet:null,weap1FireSheet:null,weap2FireSheet:null,weap3FireSheet:null,weap4FireSheet:null,burstSheet:null,pelletSheet:null,burst:null,exhaustSheet:null,prizeSheet:null,enemy:null,player:null,playerPhysics:null,playerSpatial:null,engine:null,leftWingTipGun:null,rightWingTipGun:null,musicAmbient:null,musicIdle:null,musicTempo:null,musicPlaying:!0,sndWeap1:null,
	sndWeap2:null,sndWeap3:null,sndWeap4:null,sndAlarmBattery:null,sndAlarmHull:null,sndNewLevel:null,music:null,sndPrizeAppears:null,sysPrize:null,billboardSheet:null,billboard:null,init:function(a){this._super("game layer",pc.device.canvasWidth,pc.device.canvasHeight);this.scene=a;this.addSystem(new pc.systems.Particles);this.addSystem(new pc.systems.Effects);this.addSystem(new pc.systems.Render);this.addSystem(new GamePhysics({gravity:{x:0,y:0},debug:pc.device.devMode}));this.addSystem(new pc.systems.Expiration);
	this.addSystem(new pc.systems.Layout);this.sysPrize=new pc.systems.PrizeDropper;this.addSystem(this.sysPrize);this.parent_scene=a;this.initSprites();this.initSound();this.initWall();this.initPlayer()},initSprites:function(){this.largeAsteroidSheet=new pc.SpriteSheet({image:pc.device.loader.get("asteroid-large").resource,useRotation:!0,frameWidth:96,frameHeight:96});this.largeAsteroidSheet.addAnimation({offset:-10,name:"floating",time:900,frameCount:20});this.mediumAsteroidSheet=new pc.SpriteSheet({image:pc.device.loader.get("asteroid-medium").resource,
	useRotation:!0,frameWidth:64,frameHeight:64});this.mediumAsteroidSheet.addAnimation({offset:-6,name:"floating",time:600,frameCount:20});this.smallAsteroidSheet=new pc.SpriteSheet({image:pc.device.loader.get("asteroid-small").resource,useRotation:!0,frameWidth:24,frameHeight:24});this.smallAsteroidSheet.addAnimation({offset:-3,name:"floating",time:300,frameCount:20});this.playerSheet=new pc.SpriteSheet({image:pc.device.loader.get("playership").resource,frameWidth:80,frameHeight:80,useRotation:!0});
	this.playerSheet.addAnimation({name:"Scout",frameX:0,frameCount:1});this.playerSheet.addAnimation({name:"Fighter",frameX:1,frameCount:1});this.playerSheet.addAnimation({name:"Frigate",frameX:2,frameCount:1});this.playerSheet.addAnimation({name:"Destroyer",frameX:3,frameCount:1});this.playerSheet.addAnimation({name:"Dreadnaught",frameX:4,frameCount:1});this.playerDebris=new pc.SpriteSheet({image:pc.device.loader.get("playerdebris").resource,frameWidth:600,frameHeight:600,useRotation:!1});this.playerDebris.addAnimation({name:"floating",
	frameCount:1});this.prizeSheet=new pc.SpriteSheet({image:pc.device.loader.get("prize").resource,useRotation:!1,frameWidth:60,frameHeight:60});this.prizeSheet.addAnimation({name:"floating",time:1E3,frameCount:30});this.weap1FireSheet=new pc.SpriteSheet({image:pc.device.loader.get("weap1").resource,frameWidth:30,frameHeight:30});this.weap1FireSheet.addAnimation({name:"floating",time:500,dirAcross:!0});this.weap2FireSheet=new pc.SpriteSheet({image:pc.device.loader.get("weap2").resource,frameWidth:28,
	frameHeight:28});this.weap2FireSheet.addAnimation({name:"floating",time:400,dirAcross:!0});this.weap3FireSheet=new pc.SpriteSheet({image:pc.device.loader.get("weap3").resource,frameWidth:40,frameHeight:40});this.weap3FireSheet.addAnimation({name:"floating",time:20,dirAcross:!0});this.weap4FireSheet=new pc.SpriteSheet({image:pc.device.loader.get("weap4").resource,frameWidth:16,frameHeight:16});this.weap4FireSheet.addAnimation({name:"floating",time:100,dirAcross:!0});this.burstSheet=new pc.SpriteSheet({image:pc.device.loader.get("burst").resource,
	frameWidth:80,frameHeight:80});this.burstSheet.addAnimation({name:"floating",time:25,dirAcross:!0});this.pelletSheet=new pc.SpriteSheet({image:pc.device.loader.get("pellet").resource,frameWidth:8,frameHeight:8});this.pelletSheet.addAnimation({name:"floating",time:250,dirAcross:!0});this.exhaustSheet=new pc.SpriteSheet({image:pc.device.loader.get("exhaust").resource,frameWidth:24,frameHeight:24,framesWide:20,framesHigh:1,useRotation:!0});this.exhaustSheet.addAnimation({name:"thrusting",time:2E3,loops:1})},
	initSound:function(){pc.device.soundEnabled&&(this.sndWeap1=pc.device.loader.get("weap1sound").resource,this.sndWeap1.setVolume(0.2),this.sndWeap2=pc.device.loader.get("weap2sound").resource,this.sndWeap2.setVolume(0.1),this.sndWeap3=pc.device.loader.get("weap3sound").resource,this.sndWeap3.setVolume(0.2),this.sndWeap4=pc.device.loader.get("weap4sound").resource,this.sndWeap4.setVolume(0.4),this.sndAlarmBattery=pc.device.loader.get("lowbattery").resource,this.sndAlarmBattery.setVolume(0.5),this.sndAlarmHull=
	pc.device.loader.get("powerfailure").resource,this.sndAlarmHull.setVolume(0.5),this.sndNewLevel=pc.device.loader.get("newlevel").resource,this.sndNewLevel.setVolume(0.2),this.sndPrizeAppears=pc.device.loader.get("prizeappears").resource,this.sndPrizeAppears.setVolume(0.5),this.musicAmbient=pc.device.loader.get("musicambient").resource,this.musicAmbient.setVolume(0.2),this.musicIdle=pc.device.loader.get("musicidle").resource,this.musicIdle.setVolume(0.2),this.musicTempo=pc.device.loader.get("musictempo").resource,
	this.musicTempo.setVolume(0.2),this.musicTaps=pc.device.loader.get("musictaps").resource,this.musicTaps.setVolume(0.2))},initWall:function(){createWall(this,0,0,1,pc.device.canvasHeight);createWall(this,0,0,pc.device.canvasWidth,1);createWall(this,pc.device.canvasWidth,0,1,pc.device.canvasHeight);createWall(this,0,pc.device.canvasHeight,pc.device.canvasWidth,1)},initPlayer:function(){this.player=createEntity(this.parent_scene,this,"player",pc.device.canvasWidth/2,pc.device.canvasHeight/2,0);this.engine=
	createEntity(this.parent_scene,this,"engine",pc.device.canvasWidth/2,pc.device.canvasHeight/2,0,this.player);this.leftWingTipGun=createEntity(this.parent_scene,this,"leftwingtipgun",pc.device.canvasWidth/2,pc.device.canvasHeight/2,0,this.player);this.rightWingTipGun=createEntity(this.parent_scene,this,"rightwingtipgun",pc.device.canvasWidth/2,pc.device.canvasHeight/2,0,this.player);this.playerPhysics=this.player.getComponent("physics");this.playerSpatial=this.player.getComponent("spatial")},initEnemy:function(){this.enemy=
	createEntity(this.parent_scene,this,"enemy",Math.random()%pc.device.canvasWidth,Math.random()%pc.device.canvasHeight,0);this.playerPhysics=this.player.getComponent("physics");this.playerSpatial=this.player.getComponent("spatial")},initBillboard:function(){this.billboard=createEntity(this.parent_scene,this,"billboard",0,0,0)},draw:function(){this._super()}});
	StarsLayer=pc.Layer.extend("starsLayer",{},{background:null,selected:0,saved:0,init:function(){this._super("starsLayer",1);this.setBackdrop(1)},setBackdrop:function(a){this.selected!=a&&(1>a&&(a=1),12<a&&(a=12),this.selected=a,this.background=pc.device.loader.get("backdrop"+this.selected).resource)},onLoading:function(a){},onLoaded:function(){},draw:function(){this.background.draw(pc.device.ctx,0,0);this._super()}});
	function createEntity(a,b,d,f,g,h,k){var c=pc.Entity.create(b);switch(d){case "asteroid-small":return c.addTag("ENEMY"),c.addTag("ASTEROID-SMALL"),c.points=100,c.addComponent(pc.components.Sprite.create({currentFrame:pc.Math.rand(0,10),animSpeedOffset:pc.Math.rand(500,1E3),spriteSheet:b.smallAsteroidSheet,animationStart:"floating"})),c.addComponent(pc.components.Spatial.create({x:f,y:g,dir:pc.Math.rand(0,359),w:b.smallAsteroidSheet.frameWidth,h:b.smallAsteroidSheet.frameHeight})),c.addComponent(pc.components.Physics.create({force:1+
	a.levelBounce,mass:4,bounce:a.levelBounce,shapes:[{shape:pc.CollisionShape.CIRCLE}],collisionCategory:CollisionType.ENEMY,collisionMask:CollisionType.FRIENDLY|CollisionType.ENEMY})),c;case "asteroid-medium":return c.addTag("ENEMY"),c.addTag("ASTEROID-MEDIUM"),c.points=200,c.addComponent(pc.components.Sprite.create({currentFrame:pc.Math.rand(0,10),animSpeedOffset:pc.Math.rand(500,1E3),spriteSheet:b.mediumAsteroidSheet,animationStart:"floating"})),c.addComponent(pc.components.Spatial.create({x:f,y:g,
	dir:pc.Math.rand(0,359),w:b.mediumAsteroidSheet.frameWidth,h:b.mediumAsteroidSheet.frameHeight})),c.addComponent(pc.components.Physics.create({impulse:a.levelBounce,force:2+a.levelBounce,mass:8,bounce:a.levelBounce,shapes:[{shape:pc.CollisionShape.CIRCLE}],collisionCategory:CollisionType.ENEMY,collisionMask:CollisionType.FRIENDLY|CollisionType.ENEMY})),c;case "asteroid-large":c.addTag("ENEMY");c.addTag("ASTEROID-LARGE");c.points=400;f=d=0;do d=pc.Math.rand(100,pc.device.canvasWidth-100),f=pc.Math.rand(100,
	pc.device.canvasHeight-100);while(pc.Math.isPointInRect(d,f,pc.device.canvasWidth/2-100,pc.device.canvasHeight/2-100,200,200));c.addComponent(pc.components.Sprite.create({currentFrame:pc.Math.rand(0,10),animSpeedOffset:pc.Math.rand(500,1E3),spriteSheet:b.largeAsteroidSheet,animationStart:"floating"}));c.addComponent(pc.components.Spatial.create({x:d,y:f,dir:pc.Math.rand(0,359),w:b.largeAsteroidSheet.frameWidth,h:b.largeAsteroidSheet.frameHeight}));c.addComponent(pc.components.Physics.create({impulse:a.levelBounce,
	force:4+a.levelBounce,mass:16,bounce:a.levelBounce,shapes:[{shape:pc.CollisionShape.CIRCLE}],collisionCategory:CollisionType.ENEMY,collisionMask:CollisionType.FRIENDLY|CollisionType.ENEMY}));return c;case "player":return a.Fighter.status=PlayerStatus.ALIVE,c.addTag("PLAYER"),c.addComponent(pc.components.Sprite.create({spriteSheet:b.playerSheet,animationStart:"floating"})),c.addComponent(pc.components.Spatial.create({x:f,y:g,dir:h,w:b.playerSheet.frameWidth,h:b.playerSheet.frameHeight})),c.addComponent(pc.components.Physics.create({maxSpeed:{x:a.Fighter.maxSpeed,
	y:a.Fighter.maxSpeed},linearDamping:0,mass:a.Fighter.mass,shapes:[{shape:pc.CollisionShape.CIRCLE}],collisionCategory:CollisionType.FRIENDLY,collisionMask:CollisionType.ENEMY})),c;case "debris":return c.addTag("DEBRIS"),c.addComponent(pc.components.Sprite.create({spriteSheet:b.playerDebris,animationStart:"floating"})),c.addComponent(pc.components.Spatial.create({x:pc.device.canvasWidth/2-300,y:pc.device.canvasHeight/2-300,dir:pc.Math.rand(0,359),w:b.playerDebris.frameWidth,h:b.playerSheet.frameHeight})),
	c;case "prize":do d=pc.Math.rand(100,pc.device.canvasWidth-100),f=pc.Math.rand(100,pc.device.canvasHeight-100);while(pc.Math.isPointInRect(d,f,pc.device.canvasWidth/2-100,pc.device.canvasHeight/2-100,200,200));c.addTag("PRIZE");c.addComponent(pc.components.Sprite.create({currentFrame:pc.Math.rand(0,10),animSpeedOffset:pc.Math.rand(500,1E3),spriteSheet:b.prizeSheet,animationStart:"floating"}));c.addComponent(pc.components.Spatial.create({x:d,y:f,dir:pc.Math.rand(0,359),w:b.prizeSheet.frameWidth,h:b.prizeSheet.frameHeight,
	scaleX:1.1,scaleY:1.1}));c.addComponent(pc.components.Physics.create({immovable:!0,shapes:[{shape:pc.CollisionShape.CIRCLE}],collisionCategory:CollisionType.PRIZE,collisionMask:CollisionType.FRIENDLY|CollisionType.PRIZE}));c.addComponent(pc.components.Expiry.create({lifetime:pc.Math.rand(6E3,15E3)}));return c;case "engine":return c.addComponent(pc.components.Spatial.create({dir:h,w:24,h:24})),c.addComponent(pc.components.Physics.create({shapes:[{shape:pc.CollisionShape.CIRCLE}]})),c.addComponent(pc.components.ParticleEmitter.create({spriteSheet:b.exhaustSheet,
	burst:1,delay:10,thrustMin:2,thrustMax:4,thrustTime:250,lifeMin:400,fadeOutTime:800,spinMin:65,rotateSprite:!0,emitting:!0})),c.addComponent(pc.components.Joint.create({attachedTo:k,type:pc.JointType.REVOLUTE,offset:{x:-40,y:0}})),c;case "engine1":return c.addComponent(pc.components.Spatial.create({dir:h,w:24,h:24})),c.addComponent(pc.components.Physics.create({shapes:[{shape:pc.CollisionShape.CIRCLE}]})),c.addComponent(pc.components.ParticleEmitter.create({spriteSheet:b.exhaustSheet,burst:1,delay:10,
	thrustMin:2,thrustMax:4,thrustTime:250,lifeMin:400,fadeOutTime:800,spinMin:65,rotateSprite:!0,emitting:!0})),c.addComponent(pc.components.Joint.create({attachedTo:k,type:pc.JointType.REVOLUTE,offset:{x:k.w-40}})),c;case "leftwingtipgun":return c.addComponent(pc.components.Spatial.create({dir:h,w:8,h:8})),c.addComponent(pc.components.Physics.create({shapes:[{shape:pc.CollisionShape.CIRCLE}]})),c.addComponent(pc.components.Joint.create({attachedTo:k,type:pc.JointType.REVOLUTE,offset:{x:2,y:-38}})),
	c;case "rightwingtipgun":return c.addComponent(pc.components.Spatial.create({dir:h,w:8,h:8})),c.addComponent(pc.components.Physics.create({shapes:[{shape:pc.CollisionShape.CIRCLE}]})),c.addComponent(pc.components.Joint.create({attachedTo:k,type:pc.JointType.REVOLUTE,offset:{x:2,y:38}})),c;case "projector":return c.addTag("BULLET"),c.addTag("PROJECTOR"),c.addComponent(pc.components.Sprite.create({spriteSheet:b.weap1FireSheet,animationStart:"floating"})),c.addComponent(pc.components.Expiry.create({lifetime:3E3})),
	c.addComponent(pc.components.Spatial.create({x:f,y:g,dir:h,w:b.weap1FireSheet.frameWidth,h:b.weap1FireSheet.frameHeight})),c.addComponent(pc.components.Physics.create({force:50,shapes:[{offset:{w:-25},shape:pc.CollisionShape.CIRCLE}],collisionCategory:CollisionType.FRIENDLY,collisionMask:CollisionType.ENEMY})),c;case "plasma":return c.addTag("BULLET"),c.addTag("PLASMA"),c.addComponent(pc.components.Sprite.create({spriteSheet:b.weap2FireSheet,animationStart:"floating"})),c.addComponent(pc.components.Expiry.create({lifetime:300})),
	c.addComponent(pc.components.Spatial.create({x:f,y:g,dir:h,w:b.weap2FireSheet.frameWidth,h:b.weap2FireSheet.frameHeight})),c.addComponent(pc.components.Physics.create({force:150,shapes:[{shape:pc.CollisionShape.CIRCLE}],collisionCategory:CollisionType.FRIENDLY,collisionMask:CollisionType.ENEMY})),0,c;case "laser":return c.addTag("BULLET"),c.addTag("LASER"),c.addComponent(pc.components.Sprite.create({spriteSheet:b.weap3FireSheet,animationStart:"floating"})),c.addComponent(pc.components.Expiry.create({lifetime:6E3})),
	c.addComponent(pc.components.Spatial.create({x:f,y:g,dir:h,w:b.weap3FireSheet.frameWidth,h:b.weap3FireSheet.frameHeight})),c.addComponent(pc.components.Physics.create({force:75,shapes:[{offset:{w:-4,h:-4},shape:pc.CollisionShape.CIRCLE}],collisionCategory:CollisionType.FRIENDLY,collisionMask:CollisionType.ENEMY})),c;case "gravibomb":return c.addTag("BULLET"),c.addTag("GRAVIBOMB"),c.addComponent(pc.components.Sprite.create({spriteSheet:b.weap4FireSheet,animationStart:"floating"})),c.addComponent(pc.components.Expiry.create({lifetime:12E3})),
	c.addComponent(pc.components.Spatial.create({x:f,y:g,dir:h,w:b.weap4FireSheet.frameWidth,h:b.weap4FireSheet.frameHeight})),c.addComponent(pc.components.Physics.create({force:50,shapes:[{offset:{w:50},shape:pc.CollisionShape.CIRCLE}],collisionCategory:CollisionType.FRIENDLY,collisionMask:CollisionType.ENEMY})),c;case "burst":return c.addTag("BULLET"),c.addComponent(pc.components.Sprite.create({spriteSheet:b.burstSheet,animationStart:"floating"})),c.addComponent(pc.components.Expiry.create({lifetime:250})),
	c.addComponent(pc.components.Spatial.create({x:f,y:g,dir:h,w:b.burstSheet.frameWidth,h:b.burstSheet.frameHeight})),c.addComponent(pc.components.Physics.create({force:30,shapes:[{shape:pc.CollisionShape.CIRCLE}],collisionCategory:CollisionType.FRIENDLY,collisionMask:CollisionType.ENEMY})),c;case "pellet":return c.addTag("BULLET"),c.addTag("PELLET"),c.addComponent(pc.components.Sprite.create({spriteSheet:b.pelletSheet,animationStart:"floating"})),c.addComponent(pc.components.Expiry.create({lifetime:1E3})),
	c.addComponent(pc.components.Spatial.create({x:f,y:g,dir:h,w:b.pelletSheet.frameWidth,h:b.pelletSheet.frameHeight})),c.addComponent(pc.components.Physics.create({impulse:10,force:1,shapes:[{shape:pc.CollisionShape.CIRCLE}],collisionCategory:CollisionType.FRIENDLY,collisionMask:CollisionType.ENEMY})),c;case "instructions":return c.addComponent(pc.components.Rect.create({color:"#222222",lineColor:"#888888",lineWidth:3})),c.addComponent(pc.components.Fade.create({startDelay:1E3,fadeInTime:2500,holdTime:3E3,
	fadeOutTime:2500})),c.addComponent(pc.components.Text.create({text:["Up/Down = Thursters","Left/Right = Turn","1-5 = Weapons","SPACEBAR = Pause"],lineWidth:0,fontHeight:14,offset:{x:25,y:-65}})),c.addComponent(pc.components.Expiry.create({lifetime:8E3})),c.addComponent(pc.components.Spatial.create({dir:0,w:170,h:85})),c.addComponent(pc.components.Layout.create({vertical:"middle",horizontal:"center",margin:{bottom:200}})),c;case "billboard":return c.addTag("BILLBOARD"),c.addComponent(pc.components.Sprite.create({spriteSheet:b.billboardSheet,
	animationStart:"floating"})),c.addComponent(pc.components.Spatial.create({x:f,y:g,dir:h,w:b.billboardSheet.frameWidth,h:b.billboardSheet.frameHeight})),c.addComponent(pc.components.Layout.create({vertical:"bottom",horizontal:"center"})),c;case "yourdead":return c.addComponent(pc.components.Fade.create({fadeInTime:1500,holdTime:3E3,fadeOutTime:1500})),c.addComponent(pc.components.Text.create({color:"#2d2929",strokeColor:"#631212",text:["Your Toast!"],lineWidth:2,fontHeight:80})),c.addComponent(pc.components.Expiry.create({lifetime:6500})),
	c.addComponent(pc.components.Spatial.create({w:280,h:80})),c.addComponent(pc.components.Layout.create({vertical:"center",horizontal:"center"})),c;case "menu":return c.addTag("MENU"),c.addComponent(pc.components.Sprite.create({spriteSheet:a.dialogMenuSheet,animationStart:"floating"})),c.addComponent(pc.components.Spatial.create({x:(pc.device.canvasWidth-a.dialogMenuSheet.frameWidth)/2,y:(pc.device.canvasHeight-a.dialogMenuSheet.frameHeight)/2})),c;case "credits":return c.addTag("CREDITS"),c.addComponent(pc.components.Sprite.create({spriteSheet:a.dialogCreditsSheet,
	animationStart:"floating"})),c.addComponent(pc.components.Spatial.create({x:(pc.device.canvasWidth-a.dialogCreditsSheet.frameWidth)/2,y:(pc.device.canvasHeight-a.dialogCreditsSheet.frameHeight)/2})),c}}
	function createWall(a,b,d,f,g){a=pc.Entity.create(a);a.addTag("WALL");a.addComponent(pc.components.Spatial.create({x:b,y:d,dir:0,w:f,h:g}));a.addComponent(pc.components.Physics.create({immovable:!0,collisionCategory:CollisionType.ENEMY,collisionMask:CollisionType.FRIENDLY|CollisionType.ENEMY,bounce:this.level/10,shapes:[{shape:pc.CollisionShape.RECT}]}))}
	pc.systems.PrizeDropper=pc.systems.System.extend("PrizeDropper",{},{player:null,total:0,init:function(a){this._super(["prizes"],3E3);this.player=a},onPickup:function(a){var b=pc.Math.rand(0,100);9>=b?(a.health=a.maxHealth,pc.hudLog("Full Health",!0)):10<=b&&19>=b?(a.energy=a.maxEnergy,pc.hudLog("Full Energy",!0)):20<b&&24>b?(a.maxSpeed+=2.5,pc.hudLog("MaxSpeed increased",!0)):25<b&&29>b?(a.maxSpeed-=2.5,pc.hudLog("MaxSpeed decreased",!0)):30<b&&34>b?(a.thrust+=1,pc.hudLog("Thrusters increased",!0)):
	35<b&&39>b?(a.thrust-=1,pc.hudLog("Thrusters decreased",!0)):40<b&&44>b?(a.jets+=5,pc.hudLog("Jets increased",!0)):45<b&&49>b?(a.jets-=5,pc.hudLog("Jets decreased",!0)):50<b&&54>b?(a.regen+=0.25,pc.hudLog("Regen increased",!0)):55<b&&59>b?(a.regen-=0.25,pc.hudLog("Regen decreased",!0)):60<b&&64>b?(a.maxHealth+=10,pc.hudLog("Armour increased",!0)):65<b&&69>b?(a.maxHealth-=10,pc.hudLog("Armour decreased",!0)):70<b&&74>b?(a.maxEnergy+=100,pc.hudLog("Energy increased",!0)):75<b&&79>b&&(a.maxEnergy-=100,
	pc.hudLog("Energy decreased",!0));a.info()},processAll:function(){25>pc.Math.rand(0,100)&&(this.layer.sndPrizeAppears.play(!1),createEntity(this,this.layer,"prize"),this.total++)}});
	var Weapon=pc.Base.extend("Weapon",{},{name:"",avail:!1,energy:0,speed:0,force:0,delay:0,life:0,lastFired:0,init:function(a,b,d,f,g,h){this.name=a;this.avail=!1;this.energy=b;this.speed=d;this.force=f;this.delay=g;this.life=h},canFire:function(a){return a>this.energy?!0:!1},setAvailable:function(){this.avail=!0},setUnavailable:function(){this.avail=!1}}),Fighter=pc.Base.extend("Fighter",{},{desc:"",mass:0,maxSpeed:0,thrust:0,jets:0,maxEnergy:1E3,maxHealth:100,weap1:null,weap2:null,weap3:null,weap4:null,
	regen:0,energy:0,health:0,status:0,numFired:0,numHit:0,shotsFPS:0,lastCalc:0,lastShotFPS:0,energyBarWidth:250,healthBarWidth:250,init:function(a,b,d,f,g,h,k,c,l,m){this.weap1=new Weapon("Mass_Projector",15);this.weap2=new Weapon("Plasma_Cannons",25);this.weap3=new Weapon("Laser_Pods",50);this.weap4=new Weapon("Gravibombs",250);this.desc=a;this.mass=b;this.regen=d;this.maxSpeed=f;this.thrust=g;this.jets=h;this.energy=this.maxEnergy;this.health=this.maxHealth;this.status=PlayerStatus.ALIVE},calcShotsPerSecond:function(){this.lastCalc=
	pc.device.now-this.lastShotFPS;5E3<this.lastCalc&&(this.lastShotFPS=this.numFired,this.numFired=0)},regenerate:function(a){this.energy+=this.regen;this.energy>this.maxEnergy&&(this.energy=this.maxEnergy);this.health+=0.01+this.regen/20;this.health>this.maxHealth&&(this.health=this.maxHealth);a.hudEnergyBars.getComponent("clip").w=Math.abs(250*(this.energy/this.maxEnergy));a.hudArmorBars.getComponent("clip").x=250-Math.abs(250*(this.health/this.maxHealth))},canFire:function(a){switch(a){case 1:return this.weap1.canFire(this.energy)?
	!0:!1;case 2:return this.weap2.canFire(this.energy)?!0:!1;case 3:return this.weap3.canFire(this.energy)?!0:!1;case 4:return this.weap4.canFire(this.energy)?!0:!1}},info:function(){var a="MaxHealth="+this.maxHealth+", ",a=a+("MaxEnergy="+this.maxEnergy+", "),a=a+("MaxSpeed="+this.maxSpeed+", "),a=a+("Regen="+this.regen+", "),a=a+("thrust="+this.thrust+", "),a=a+("Jets="+this.jets);pc.hudLog(a,!0)},getThrust:function(){return this.thrust}});
}